# Implementation Task List — openclaw-desktop

This is the **source of truth** for the cron-driven implementation work.

## How the cron uses this file
- Each run picks the **top-most unchecked** task in **P0 / M1** first.
- It implements that task (code + tests where appropriate).
- It marks the task ✅ with date + short note, commits to `master`, and pushes.

Conventions:
- Tasks are written so they can be completed in ~15 minutes to ~2 hours.
- Prefer vertical slices that end in a runnable state.
- Avoid large refactors until a baseline is running.

---

## Milestone M1 — Desktop manager MVP (Telegram)
Goal: user can install/run the desktop app, turn OpenClaw gateway On/Off, connect Telegram, see status + basic logs.

### P0-FOUNDATION (skeleton)
- [ ] **T0.1 Repo scaffolding (monorepo skeleton)**
  - Create folders per `docs/REPO_STRUCTURE.md`:
    - `apps/desktop/`, `apps/manager/`, `packages/core/`, `packages/integrations/`, `packages/policy/`
  - Add minimal placeholder READMEs in each folder.
  - Add root tooling skeleton (format/lint/test scripts) *without* heavy implementation.

- [ ] **T0.2 Manager service skeleton (TypeScript)**
  - Minimal HTTP server binding to `127.0.0.1`.
  - Implement `GET /status` returning stubbed gateway status.
  - Add local auth token plumbing (static token in dev; real token later).

- [ ] **T0.3 Desktop app skeleton**
  - Choose framework (record decision in `docs/DECISIONS.md`).
  - Basic window with Home screen and an On/Off button wired to manager API.

### P0-GATEWAY LIFECYCLE
- [ ] **T1.1 Gateway process control (start/stop/restart)**
  - Implement start/stop/restart in manager.
  - Idempotency rules per PRD.

- [ ] **T1.2 Status polling + transient states**
  - Desktop polls `/status` and shows Running/Stopped/Starting/Stopping.

### P0-INTEGRATIONS: TELEGRAM
- [ ] **T2.1 Telegram integration: data model + storage**
  - Store bot token securely (dev: env/file; later: keychain).
  - Represent integration connection state in manager.

- [ ] **T2.2 Telegram connect flow (UI + manager)**
  - UI: token input + connect button.
  - Manager: validate token (basic) and persist.

- [ ] **T2.3 Telegram disconnect flow**
  - UI disconnect.
  - Manager removes token/config.

### P0-CONFIG GENERATION
- [ ] **T3.1 Generated OpenClaw config (MVP)**
  - Manager generates a minimal OpenClaw config file/artifact.
  - Include header: generated by openclaw-desktop.

- [ ] **T3.2 Safe writes + rollback**
  - Atomic write strategy (tmp + rename) per `docs/CONFIG_GENERATION.md`.

### P0-OBSERVABILITY
- [ ] **T4.1 Basic logs surface**
  - Manager exposes recent logs path/lines.
  - Desktop shows last N lines and copy button.

- [ ] **T4.2 Diagnostics checklist (minimal)**
  - Implement `/diagnostics/run` returning a few checks.

---

## Milestone M2 — Permissions framework
- [ ] T5.1 Permission catalog v1
- [ ] T5.2 Permissions UI screen
- [ ] T5.3 Policy enforcement hook (confirm-before-send baseline)
- [ ] T5.4 Audit log JSONL

---

## Milestone M3 — Gmail read-only
- [ ] T6.1 BYO OAuth creds UI
- [ ] T6.2 OAuth flow + token storage
- [ ] T6.3 Gmail read-only integration wiring

---

## Notes / constraints
- Prefer local-first development.
- Do not build “full chat UI” yet; use Telegram for interaction.
- Avoid shipping secrets in repo.
