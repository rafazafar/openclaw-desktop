# Data model — openclaw-desktop (draft)

## Storage locations
- **Secrets**: OS keychain (preferred)
- **State/config**: local app data directory
- **Logs**: local log directory with rotation

---

## Entities

### InstallationState
- `installId: string`
- `createdAt: string`
- `managerApiPort: number`
- `managerApiTokenRef: string` (keychain reference)
- `openclawVersionPinned: string`

### IntegrationConnection
- `integrationId: string`
- `connected: boolean`
- `accountLabel?: string`
- `tokenRef?: string` (keychain ref)
- `connectedAt?: string`
- `lastValidatedAt?: string`
- `needsAttention?: boolean`
- `lastError?: string`

### PermissionState
- `permissionId: string` (e.g. `gmail.read_metadata`)
- `enabled: boolean`
- `source: "default" | "user" | "policy"`
- `updatedAt: string`

### ModelProfile
- `profileId: "cheapest" | "balanced" | "coding"`
- `updatedAt: string`

### AuditEvent
MVP can be file-based JSONL.
- `time`
- `type` (e.g. `permission.changed`, `integration.connected`, `gateway.started`)
- `summary`
- `details` (small JSON)

---

## Derived artifacts
### Generated OpenClaw config
Manager should generate OpenClaw config from:
- IntegrationConnection
- PermissionState
- ModelProfile

Include a header comment:
- “generated by openclaw-desktop; edit in app”

---

## Migration
State store should include `schemaVersion` and migration scripts.
